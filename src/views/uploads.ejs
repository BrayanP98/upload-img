<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <link rel="stylesheet"  type="text/css" href="/css/bootstrap.min.css">
    <script src="/js/jquery-3.6.1.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="/css/styles.css"></link>
    <script   src="/js/myscript.js"  type="text/jacascript"></script>
</head>
<body>
   <script>

$(document).ready(function(){
    $("#updateBtn").click(function() {
        event.preventDefault();     
           $("#pop-up").addClass('show')
           $("#pop-wrap").addClass('show')
           });
     
           
       });


        

   
   </script>

    <div class="container p-4" style="background: rgba(0, 234, 255, 0.164);">
        <h1>gestion de productos</h1>
        <div class="row">
            <div class="col-md-4  offset-md-4" >
               <div class="card">
                <div class="card-body">
                    <form action="/upload"  method="post" enctype="multipart/form-data">
                        <div class="input-group mb-3">  
                            <input type="file" id="inputGroupFile01" name="image"class="form-control" placeholder=" chosee" aria-label="Example text with button addon"required >    
                          </div>
                          <div class="form-group">
                            <input type="text" name="codigo" id="codigo" placeholder="CODIGO"required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="nombre" id="nombre" placeholder="NOMBRE"required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="valor" id="valor" placeholder="VALOR"required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="categoria" id="categoria" placeholder="categoria"required>
                        </div>
                        <div class="form-group">
                            <input type="text" name="cantidad" id="cantidad" placeholder="cantidad"required>
                        </div>
                        
                        <div class="form-group my-3">
                            <textarea name="descripcion" class="form-control" placeholder="descripcion" required></textarea>
                        </div>
                        <div class="form-group">
                            <button  type="submit" class="btn btn-success btn-block"> upload</button>
                            
                        </div>
                        
                        <div class="form-group" id="cont-previa"  >
                            
                            <img src="/img/camara-img.png" name="imagen2"id="previa"  >
                            
                        </div>
                        
                    </form>
                            
                   

                    </div>
                </div>
               </div>
               

             
            </div>
            
        </div>

        <div class="container-fluid">
            <h1>productos en stok</h1>
            <div class="row">
                <h1>pollos</h1>
                <div class="col-12" id="item-prod">
                   
       
                    <% prods.forEach(function(prod) { %>
                        <% if ( prod.categoria=='pollos') { %>
                     <div class="col-md-12" >
                    
                      <img src="<%= prod.imagen %>" alt="">
                      <div class="product-body">
                         <p class="product-category">Cod. <%= prod.codigo %></p>
                         <h3 class="product-name"><a href="#" id="nombre-prod"> <%= prod.nombre %></a></h3>
                         <h4 class="product-price">$<%= prod.valor %><del --class="product-old-price">$990.00</del></h4>
                      
                        </div>   
                        <a href="/find/<%= prod._id %>" class="btn btn-primary" > update</a>
                        <a href="/delete/<%= prod._id %>" class="btn btn-primary" > delete</a>
                     </div>
                     <% } %>
                     <% }) %>
                     <div>      
                      </div>
                     </div>
                     <h1>escritoros</h1>
                     <div class="col-12" id="item-prod">
                   
                     
                        <% prods.forEach(function(prod) { %>
                            <% if ( prod.categoria=='escritorio') { %>
                         <div class="col-md-12">
                        
                          <img src="<%= prod.imagen %>" alt="">
                          <div class="product-body">
                             <p class="product-category">Cod. <%= prod.codigo %></p>
                             <h3 class="product-name"><a href="#" id="nombre-prod"> <%= prod.nombre %></a></h3>
                             <h4 class="product-price">$<%= prod.valor %><del --class="product-old-price">$990.00</del></h4>
                          
                            </div>   
                            <a href="/find/<%= prod._id %>" class="btn btn-primary" > update</a>
                            <a href="/delete/<%= prod._id %>" class="btn btn-primary" > delete</a>
                         </div>
                         <% } %>
                         <% }) %>
                         <div>      
                          </div>
                         </div>

                         <h1>resto</h1>
                     <div class="col-12" id="item-prod">
                   
                     
                        <% prods.forEach(function(prod) { %>
                           
                         <div class="col-md-12">
                        
                          <img src="<%= prod.imagen %>" alt="">
                          <div class="product-body">
                             <p class="product-category">Cod. <%= prod.codigo %></p>
                             <h3 class="product-name"><a href="#" id="nombre-prod"> <%= prod.nombre %></a></h3>
                             <h4 class="product-price">$<%= prod.valor %><del --class="product-old-price">$990.00</del></h4>
                          
                            </div>   
                            <a href="/find/<%= prod._id %>" class="btn btn-primary" > update</a>
                            <a href="/delete/<%= prod._id %>" class="btn btn-primary" > delete</a>
                         </div>
                         
                         <% }) %>
                         <div>      
                          </div>
                         </div>


            </div>




        </div>

        
        <div class="pop-up" id="pop-up">
            <div class="pop-wrap" id="pop-wrap">
              <div class="pop-up-title">
                <h2>CODYTRoN</h2>
                <p>lorem ipsud sis temd.</p>
              </div>
              <div class="subscription">
                
                <i class="fa-solid fa-circle-xmark" id="close"></i>
                <div class="subs-content">
                   <h2>Inicio secion</h2>
                  <p>Ingresa tus datos</p>
                  <form  action="/task/findUser" method="post">
                    <input type="email" class="subs-email" placeholder="ingersa tu correo" name="email" id="email-user"required>
                    <input type="password" class="sub-pass" placeholder="ingersa tu contraseÃ±a" name="password" id="pwd" required>
                    <button  class="subs-send" type="submit" id="ingreso">Ingresar</button>
                    <a href="#" id="crear_cuenta">crear cuenta</a>
                  </form>
                </div>
              </div>
            </div>
          
            </div>

       
 

    <script>
        // Variables
        const inputFile = document.querySelector('#inputGroupFile01');
        const image = document.querySelector('#previa');
        const cod = document.querySelector('#codigoim');
     
        /**
         * Returns a file in Base64URL format.
         * @param {File} file
         * @return {Promise<string>}
         */

        
        async function encodeFileAsBase64URL(file) {
            return new Promise((resolve) => {
                const reader = new FileReader();
                reader.addEventListener('loadend', () => {
                    resolve(reader.result);
                });
                reader.readAsDataURL(file);
                console.log(file);
            });
        };

        // Eventos
        inputFile.addEventListener('input', async (event) => {
            // Convierto la primera imagen del input en una ruta Base64
            const base64URL = await encodeFileAsBase64URL(inputFile.files[0]);
            // Anyado la ruta Base64 a la imagen
            image.setAttribute('src', base64URL);
            cod.innerHTML=inputFile;
            console.log();
        });
    </script>
</div>
</body>
</html>